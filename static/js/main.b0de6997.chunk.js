(this.webpackJsonpposts=this.webpackJsonpposts||[]).push([[0],{488:function(n,e,t){},489:function(n,e,t){"use strict";t.r(e);var a,r,o,i,c,l=t(0),u=t.n(l),s=t(116),p=t.n(s),m=t(11),d=t(117),b={githubConvertedToken:"Z2hwX3ZJZktsYkRnQ1JXVjlIYUdCamVJUWRBY2hKbUdhajBOVVJ6Rw==",githubUserName:"worldzhao",githubRepo:"blog",title:"\u6d77\u79cb"},f=t(32),h=new f.a({uri:"https://api.github.com/graphql",request:function(n){n.setContext({headers:{authorization:"Bearer ".concat(atob(b.githubConvertedToken))}})}}),g=function(n){return new f.a({uri:"https://api.github.com/graphql",request:function(e){e.setContext({headers:{authorization:"Bearer ".concat(n)}})}})},x=t(75),v=t(23),E=t(16),w=t(4),O=t(81),j=t.n(O),y=t(31),k=t(5),S=k.a.div(a||(a=Object(w.a)(["\n  position: relative;\n  padding: 32px;\n  text-align: center;\n"]))),U=function(){return u.a.createElement(S,null,u.a.createElement(H,{isAbsolute:!0}))},A=t(12),T=t.n(A),z=t(22),R=t(125),C=t(126),I=b.enableOAuth,M=b.OAuthClientID,Y=k.a.div(r||(r=Object(w.a)(["\n  display: ",";\n  position: ",";\n  top: 10px;\n  right: 10px;\n"])),I?"block":"none",(function(n){return n.absolute?"absolute":"initial"})),L=k.a.button(o||(o=Object(w.a)(["\n  -webkit-appearance: none;\n  background: linear-gradient(\n    180deg,\n    rgb(136, 220, 109) 0%,\n    rgb(92, 168, 65) 100%\n  );\n  color: #fff;\n  border: none;\n  padding: 8px 16px;\n  font-size: 16px;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: 0.2s;\n  outline: 0;\n\n  :hover {\n    box-shadow: 0px 0px 10px 1px rgba(0, 0, 0, 0.1);\n  }\n"]))),_=k.a.span(i||(i=Object(w.a)(["\n  color: #fff;\n  font-size: 18px;\n"]))),H=function(n){var e=n.isAbsolute,t=localStorage.getItem("githubToken")||!1,a=function(){var n=Object(z.a)(T.a.mark((function n(){return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:window.location.href="https://github.com/login/oauth/authorize?client_id="+M;case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return u.a.createElement(Y,{absolute:e},t?u.a.createElement(_,null,"Logged in as ",localStorage.getItem("githubUsername")):u.a.createElement(L,{onClick:a},u.a.createElement(R.a,{icon:C.a})," Log in"))};function B(n){var e=n.fill;return u.a.createElement("svg",{width:"80",height:"80",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:e},u.a.createElement("g",{fill:"none","fill-rule":"evenodd"},u.a.createElement("g",{transform:"translate(1 1)","stroke-width":"2"},u.a.createElement("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),u.a.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},u.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))}var D,N,P,F,J,V,q,G,Z,K,Q,W,X,$,nn,en,tn,an,rn,on,cn,ln,un=k.a.span(c||(c=Object(w.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n"]))),sn=function(){return u.a.createElement(un,null,u.a.createElement(B,{fill:"#2ecc71"}))},pn=k.a.div(D||(D=Object(w.a)(["\n  margin: 0 auto 0 auto;\n  width: 90%;\n  max-width: 700px;\n  padding: 20px 10px;\n"]))),mn=k.a.div(N||(N=Object(w.a)(["\n  cursor: pointer;\n  margin-bottom: 1rem;\n  border-radius: 10px;\n  padding: 10px;\n  transition: 0.2s;\n  position: relative;\n  background-color: rgb(255, 255, 255);\n  color: rgb(54, 53, 55);\n  transition: all 0.25s linear 0s;\n\n  &:hover {\n    background-color: #f5f5f5;\n  }\n"]))),dn=k.a.div(P||(P=Object(w.a)(["\n  display: flex;\n  align-items: center;\n"]))),bn=k.a.div(F||(F=Object(w.a)(['\n  display: inline-block;\n  background: #009bbb;\n  border-radius: 4px;\n  padding: 4px 8px;\n  font-size: 12px;\n  color: #fff;\n  text-transform: uppercase;\n  font-weight: 300;\n  line-height: 16px;\n  font-family: "Quicksand";\n  margin-right: 10px;\n  margin-bottom: 8px;\n']))),fn=function(n){var e=n.value;return u.a.createElement(bn,{key:e.id,style:{backgroundColor:"#".concat(e.color)}},e.name)},hn=k.a.p(J||(J=Object(w.a)(["\n  font-size: 18px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n"]))),gn=k.a.p(V||(V=Object(w.a)(["\n  color: #b5b5b5;\n  font-size: 16px;\n  margin-bottom: 8px;\n"]))),xn=function(n){var e=n.time;return u.a.createElement(gn,null,e," Min Read")},vn=t(51),En=t.n(vn),wn=function(n){var e=n.blog,t=Object(l.useState)([]),a=Object(E.a)(t,2),r=a[0],o=a[1],i=Object(v.f)();return Object(l.useEffect)((function(){var n=e.labels.nodes.filter((function(n){return"blog"!==n.name}));o(n)}),[e.labels.nodes]),u.a.createElement(mn,null,u.a.createElement("div",{onClick:function(){return n=e.title,t=e.number,void i.push("/post/".concat(n,"/").concat(t));var n,t}},u.a.createElement("h2",{style:{marginTop:"0.2em"}},e.title),u.a.createElement(dn,null,u.a.createElement(u.a.Fragment,null,r.map((function(n,e){return u.a.createElement(fn,{value:n,key:e})})))),u.a.createElement(xn,{time:En()(e.body).minutes}),u.a.createElement(hn,null,e.bodyText)))},On=j()(q||(q=Object(w.a)(['\n{\n  repository(owner: "','", name: "','") {\n    issues(first: 100, states: OPEN, orderBy: { direction: DESC, field: CREATED_AT }) {\n      nodes {\n        title\n        body\n        bodyHTML\n        bodyText\n        number\n        labels(first: 100) {\n          nodes {\n            color\n            name\n            id\n          }\n        }\n        author {\n          url\n          avatarUrl\n          login\n        }\n        updatedAt\n        id\n      }\n    }\n  }\n}\n'])),b.githubUserName,b.githubRepo),jn=function(){var n=Object(l.useState)([]),e=Object(E.a)(n,2),t=e[0],a=e[1],r=Object(y.a)(On),o=r.loading,i=r.error,c=r.data;return Object(l.useEffect)((function(){var n,e;o||(i&&console.error(i),c&&a(null===c||void 0===c||null===(n=c.repository)||void 0===n||null===(e=n.issues)||void 0===e?void 0:e.nodes))}),[o,i,c]),u.a.createElement(u.a.Fragment,null,u.a.createElement(U,null),u.a.createElement(pn,null,o?u.a.createElement(sn,null):t.map((function(n,e){return u.a.createElement(wn,{blog:n,key:e})}))))},yn=t(52),kn=t.n(yn),Sn=t(53),Un=t(79),An={THUMBS_UP:"\ud83d\udc4d",THUMBS_DOWN:"\ud83d\udc4e",LAUGH:"\ud83d\ude04",HOORAY:"\ud83c\udf89",CONFUSED:"\ud83d\ude15",HEART:"\u2764\ufe0f",ROCKET:"\ud83d\ude80",EYES:"\ud83d\udc40"},Tn=function(n){return function(n){var e={};return Object.keys(n).forEach((function(t){e[n[t]]=t})),e}(An)[n]||""},zn=function(){var n=Object(z.a)(T.a.mark((function n(){var e,t,a;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e=localStorage.getItem("githubToken"))){n.next=10;break}return n.next=4,fetch("https://api.github.com/user",{headers:new Headers({authorization:"Bearer ".concat(e)})});case 4:return t=n.sent,n.next=7,t.json();case 7:return(a=n.sent).token=e,n.abrupt("return",a);case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Rn=k.a.div(G||(G=Object(w.a)(["\n  margin: 0 auto 0 auto;\n  width: 90%;\n  max-width: 700px;\n  padding: 20px 10px;\n  position: relative;\n"]))),Cn=k.a.h1(Z||(Z=Object(w.a)(["\n  @media only screen and (max-width: 768px) {\n    font-size: 30px;\n  }\n"]))),In=k.a.p(K||(K=Object(w.a)(["\n  font-weight: 400;\n  font-size: 14px;\n  margin-bottom: 0px;\n  margin-top: 0px;\n"]))),Mn=k.a.a(Q||(Q=Object(w.a)(["\n  font-size: 14px;\n  text-decoration: none;\n  transition-duration: 0.15s, 0.15s, 0.15s;\n  transition-timing-function: ease-in, ease-in, ease-in;\n  transition-delay: 0s, 0s, 0s;\n"]))),Yn=k.a.span(W||(W=Object(w.a)(["\n  position: static;\n  bottom: 60px;\n  animation-name: scale-in;\n  animation-duration: 0.15s;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n"]))),Ln=k.a.button(X||(X=Object(w.a)(['\n  outline: none;\n  border: 1px solid;\n  font-size: 22px;\n  font-family: "Shadows Into Light", serif;\n  border-radius: 5px;\n  padding: 0px 20px 0 30px;\n  cursor: pointer;\n  position: relative;\n\n  :hover {\n    background-color: "#373737";\n    color: white;\n  }\n\n  :before {\n    content: "\\27A4";\n    position: absolute;\n    transform: translateY(-50%) rotate(180deg);\n    left: 10px;\n    font-size: 16px;\n    top: 54%;\n  }\n'],['\n  outline: none;\n  border: 1px solid;\n  font-size: 22px;\n  font-family: "Shadows Into Light", serif;\n  border-radius: 5px;\n  padding: 0px 20px 0 30px;\n  cursor: pointer;\n  position: relative;\n\n  :hover {\n    background-color: "#373737";\n    color: white;\n  }\n\n  :before {\n    content: "\\\\27A4";\n    position: absolute;\n    transform: translateY(-50%) rotate(180deg);\n    left: 10px;\n    font-size: 16px;\n    top: 54%;\n  }\n']))),_n=k.a.div($||($=Object(w.a)(["\n  display: flex;\n  align-items: center;\n"]))),Hn=k.a.img(nn||(nn=Object(w.a)(["\n  width: 50px;\n  height: 50px;\n  border-radius: 40px;\n  margin: 10px;\n  margin-left: 0px;\n"]))),Bn=k.a.p(en||(en=Object(w.a)(["\n  margin-bottom: 0px;\n  margin-top: 0px;\n  font-size: 16px;\n"]))),Dn=t(132),Nn=t(494),Pn=t(493),Fn=function(n){var e=n.children,t=Object(Dn.a)(n,["children"]);return u.a.createElement("a",{href:t.href,target:"_blank",rel:"noopener noreferrer",className:"blog-post-anchor"},e)},Jn=function(n){var e=n.children;return u.a.createElement(Nn.a,{language:"javascript",style:Pn.a},e.props.children)},Vn=function(n){var e=n.comment;return u.a.createElement(qn,null,u.a.createElement(_n,null,u.a.createElement(Hn,{src:e.author.avatarUrl,alt:e.author.login}),u.a.createElement("div",null,u.a.createElement(Bn,null,e.author.login),u.a.createElement(In,null,kn()(e.updatedAt).format("DD MMM YYYY")))),u.a.createElement(Sn.a,{options:{overrides:{a:{component:Fn},pre:{component:Jn}}}},e.body))},qn=k.a.div(tn||(tn=Object(w.a)(["\n  margin-top: 3rem;\n  border-radius: 10px;\n  padding: 10px 30px;\n  position: relative;\n  font-size: 16px;\n"]))),Gn=k.a.a(an||(an=Object(w.a)(['\n  outline: none;\n  border: 1px solid;\n  font-size: 22px;\n  font-family: "Shadows Into Light", serif;\n  border-radius: 5px;\n  padding: 0px 20px 0 20px;\n  cursor: pointer;\n  position: relative;\n  text-decoration: none;\n  margin: auto;\n\n  :hover {\n    background-color: "#373737";\n    color: white;\n  }\n']))),Zn=k.a.div(rn||(rn=Object(w.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 3rem;\n"]))),Kn=function(n){var e=n.postUrl,t=n.comments;return u.a.createElement(u.a.Fragment,null,u.a.createElement(Zn,null,u.a.createElement(Gn,{href:e+"#issue-comment-box",target:"_blank"},"Post a comment")),t.map((function(n,e){return u.a.createElement(Vn,{comment:n,key:e})})))};function Qn(){var n=parseInt(window.location.href.split("/").pop()),e=j()(on||(on=Object(w.a)(['{\n    repository(owner: "','", name: "','") {\n      issue(number: ',") {\n        title\n        body\n        bodyHTML\n        url\n        bodyText\n        number\n        bodyHTML\n        author {\n          url\n          avatarUrl\n          login\n        }\n        reactions(first:100){\n          nodes{\n            content\n            user{\n              id\n              login\n            }\n          }\n        }\n        updatedAt\n        id\n        comments(first:100) {\n          nodes {\n            author {\n              ... on User {\n                avatarUrl\n                name\n                login\n              }\n            }\n            body\n            bodyHTML\n            bodyText\n            publishedAt\n            updatedAt\n          }\n        }\n      }\n    }\n  }\n  "])),b.githubUserName,b.githubRepo,n),t=Object(l.useState)([]),a=Object(E.a)(t,2),r=a[0],o=a[1],i=Object(l.useState)(""),c=Object(E.a)(i,2),s=c[0],p=c[1],m=Object(l.useState)(!1),d=Object(E.a)(m,2),f=d[0],h=d[1],x=Object(l.useState)([]),v=Object(E.a)(x,2),O=v[0],k=v[1],S=Object(l.useState)([]),U=Object(E.a)(S,2),A=U[0],R=U[1],C=Object(y.a)(e),I=C.loading,M=C.error,Y=C.data,L=Object(l.useRef)(null),_=localStorage.getItem("githubToken"),B=Object(l.useCallback)((function(n){var e=[];n.forEach((function(n){var t,a={by:n.user.login,emoji:(t=n.content,An[t]||"")};e.push(a)})),k(e)}),[]),D=function(){var n=Object(z.a)(T.a.mark((function n(e){var t,a,r;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=O,n.next=3,zn();case 3:if(a=n.sent,0!==t.filter((function(n){return n.emoji===e&&n.by===a.login})).length){n.next=12;break}return r={by:a.login,emoji:e},n.next=9,g(_).mutate({mutation:j()(cn||(cn=Object(w.a)(['\n          mutation AddReaction {\n            addReaction(input:{subjectId:"','",content:',',clientMutationId:"','"}) {\n              reaction {\n                id\n              }\n            }\n          }\n        '])),s,Tn(e),a.node_id)});case 9:t.push(r),n.next=15;break;case 12:return n.next=14,g(_).mutate({mutation:j()(ln||(ln=Object(w.a)(['\n          mutation RemoveReaction {\n            removeReaction(input:{subjectId:"','",content:',',clientMutationId:"','"}) {\n              reaction {\n                id\n              }\n            }\n          }\n        '])),s,Tn(e),a.node_id)});case 14:t=t.filter((function(n){return!(n.by===a.login&&n.emoji===e)}));case 15:k(t),L.current.forceUpdate(),h(!1);case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();if(Object(l.useEffect)((function(){if(!I&&Y){var n=Y.repository.issue;p(n.id),o(n),B(n.reactions.nodes),R(n.comments.nodes)}}),[I,M,Y,B]),I)return u.a.createElement(sn,null);return u.a.createElement(u.a.Fragment,null,r.title&&u.a.createElement(Rn,null,u.a.createElement(Ln,{onClick:function(){return window.history.go(),void window.history.back()}},"Back"),u.a.createElement(Cn,null,r.title),u.a.createElement("div",null,u.a.createElement(_n,null,u.a.createElement(Hn,{src:r.author.avatarUrl,alt:r.author.login}),u.a.createElement("div",null,u.a.createElement(Bn,null,r.author.login),u.a.createElement(In,null,kn()(r.updatedAt).format("DD MMM YYYY")," .",En()(r.body).minutes," Min Read .",u.a.createElement(Mn,{href:r.url,target:"_black"},"View On Github"))))),u.a.createElement(Sn.a,{options:{overrides:{a:{component:Fn},pre:{component:Jn}}}},r.body),f&&u.a.createElement(Yn,null,_?u.a.createElement(Un.GithubSelector,{onSelect:function(n){return D(n)}}):u.a.createElement(H,{isAbsolute:!1})),u.a.createElement(Un.GithubCounter,{ref:L,counters:O,onSelect:function(n){return D(n)},onAdd:function(){return h(!f)}}),u.a.createElement(Kn,{postUrl:r.url,comments:A})))}var Wn=function(){return u.a.createElement(x.a,{basename:"posts"},u.a.createElement(v.c,null,u.a.createElement(v.a,{exact:!0,path:"/",component:jn}),u.a.createElement(v.a,{exact:!0,path:"/post/:title/:issueNumber",component:Qn})))},Xn=b.enableOAuth,$n=b.OAuthClientID,ne=b.OAuthSecret,ee=function(){var n=Object(l.useState)(!0),e=Object(E.a)(n,2),t=e[0],a=e[1],r=function(){var n=Object(z.a)(T.a.mark((function n(e){var t;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token",{method:"POST",body:new URLSearchParams({client_id:$n,client_secret:ne,code:e}),headers:new Headers({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"})});case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),o=function(){var n=Object(z.a)(T.a.mark((function n(){var e,t;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,zn();case 2:e=n.sent,t=e.login,localStorage.setItem("githubUsername",t);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(l.useEffect)((function(){var n=new URLSearchParams(window.location.search);r(n.get("code")).then((function(n){n&&(localStorage.setItem("githubToken",n.access_token),o().then((function(){return a(!1)})))}))}),[]),Xn&&t?u.a.createElement(sn,null):window.location.replace(window.location.origin+window.location.pathname)},te=function(){return new URLSearchParams(window.location.search).get("code")?u.a.createElement(ee,null):u.a.createElement(u.a.Fragment,null,u.a.createElement(d.Helmet,null,u.a.createElement("title",null,b.title),u.a.createElement("meta",{charSet:"utf-8"})),u.a.createElement(m.a,{client:h},u.a.createElement(Wn,null)))};t(488);p.a.render(u.a.createElement(te,null),document.getElementById("root"))}},[[489,1,2]]]);
//# sourceMappingURL=main.b0de6997.chunk.js.map